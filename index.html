<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .container {
        display: flex;
        justify-content: center;
      }
      .legend {
        text-align: center;
      }
      .box {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        width: 800px;
        height: 800px;
        border: 2px solid black;
      }

      .red {
        background-color: rgb(105, 24, 24);
        width: 50%;
        height: 60%;
      }
      .blue {
        background-color: deepskyblue;
        width: 50%;
        height: 100%;
      }
      .beige {
        background-color: beige;
        width: 50%;
        height: 40%;
      }
      input {
        border: 2px solid black;
        border-radius: 5px;
        margin: 4px;
        padding: 5px;
      }
      .blue table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: rgba(255, 255, 255, 0.1);
      }
    </style>
  </head>
  <body>
    <div id="massage"></div>
    <form onsubmit="return validate(event)">
      <div class="container">
        <div class="box">
          <div class="red">
            <legend id="legend">Registration Form</legend>
            <label for="username">Enter your name :</label>
            <input
              type="text"
              name="username"
              id="username"
              placeholder="Your name"
            />
            <div>
              <label for="email">Email :</label>
              <input type="text" name="email" id="email" placeholder="Email" />
            </div>
            <div>
              <label for="Gender">Gender :</label>
              <input type="radio" name="Gender" id="male" value="Male" />
              <label for="Male">Male</label>
              <input type="radio" name="Gender" id="Female" value="Female" />
              <label for="Female">Female</label>
            </div>
            <div>
              <label for="password">Password:</label>
              <input type="password" id="password" placeholder="Password" />
            </div>
            <div>
              <label for="Confipassword">Confirm password:</label>
              <input
                type="password"
                id="confiPassword"
                placeholder="Confirm your password"
              />
            </div>
            <label for="DOB">DOB:</label>
            <input type="date" />
            <div>
              <label for="city">City :</label>
              <select name="city" id="city">
                <option value="Dhaka">Dhaka</option>
                <option value="Mumbai">Mumbai</option>
                <option value="Tokyo">Tokyo</option>
                <option value="Paris">Paris</option>
                <option value="Sydney">Sydney</option>
              </select>
            </div>
            <div>
              <legend>Terms and Conditions</legend>
              <input type="checkbox" id="agreed" value="agreed" />
              <label for="agreed">Agree</label>
              <input type="checkbox" id="nagree" value="nagree" />
              <label for="nagree">Not agree</label>
            </div>

            <div>
              <input type="submit" name="submit" value="Submit" />
            </div>
            <div>
              <label for="bgColor">Choose Background Color:</label>
              <input type="color" id="bgColor" name="bgColor" />
            </div>
          </div>

          <div class="beige"></div>
          <div class="blue">
            <table>
              <thead>
                <tr>
                  <th>City</th>
                  <th>AQI</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Dhaka</td>
                  <td>85</td>
                </tr>
                <tr>
                  <td>Cumilla</td>
                  <td>110</td>
                </tr>
                <tr>
                  <td>Khulna</td>
                  <td>95</td>
                </tr>
                <tr>
                  <td>Barisal</td>
                  <td>78</td>
                </tr>
                <tr>
                  <td>Kustia</td>
                  <td>102</td>
                </tr>
                <tr>
                  <td>Chandpur</td>
                  <td>88</td>
                </tr>
                <tr>
                  <td>Nuakhali</td>
                  <td>75</td>
                </tr>
                <tr>
                  <td>Sylhet</td>
                  <td>80</td>
                </tr>
                <tr>
                  <td>Rajshahi</td>
                  <td>90</td>
                </tr>
                <tr>
                  <td>Narshingdi</td>
                  <td>70</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </form>

    <script>
      document.getElementById("bgColor").addEventListener("input", function () {
        document.querySelector(".red").style.backgroundColor = this.value;
      });
      function validate(event) {
        let uname = document.getElementById("username");
        let pass = document.getElementById("password");
        let con_pass = document.getElementById("Confipassword");
        let massageDiv = document.getElementById("massage");
        let dobInput = document.getElementById("dob").value;

        let dob = new Date(dobInput);
        let today = new Date();
        let age = today.getFullYear() - dob.getFullYear();

        if (!dobInput) {
          massageDiv.innerHTML = "Please select your date of birth.";
          return false;
        }
        if (age < 18) {
          massageDiv.innerHTML =
            "You must be at least 18 years old to register.";
          return false;
        }

        const email = document.getElementById("email");
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email.value.trim() === "") {
          massageDiv.innerHTML = "Email cannot be empty.";
          return false;
        }
        if (!emailRegex.test(email.value)) {
          massageDiv.innerHTML = "Please enter a valid email address.";
          return false;
        }

        if (pass.value == "" || con_pass.value == "") {
          massageDiv.innerHTML = " password feild can't be empty";
          return false;
        }
        if (pass.value.length < 8) {
          massageDiv.innerHTML = "Password length must be at least 8 ";
          return false;
        }
        if (pass.value !== con_pass.value) {
          massageDiv.innerHTML = "passwords are not matched";
          return false;
        }
        document
          .getElementById("bgColor")
          .addEventListener("input", function () {
            document.querySelector(".red").style.backgroundColor = this.value;
          });

        // Regular expression to check if the username only contains letters, hyphen (-), and dot (.)
        let regex = /^[A-Za-z.-]+$/;
        if (/\d/.test(uname.value)) {
          massageDiv.innerHTML = " Digits are not allowed.";
        } else if (!regex.test(uname.value)) {
          massageDiv.innerHTML =
            "Invalid name: Special characters are not allowed except '-' and '.'.";
        } else {
          massageDiv.innerHTML = "OK: Name is valid.";
        }

        massageDiv.style.color = "green";
        massageDiv.innerHTML = " All fields are valid. Form can be submitted!";
        return true;
      }
    </script>
  </body>
</html>
